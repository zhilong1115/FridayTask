<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>2026-02-27 - MACDï¼šè¶‹åŠ¿è·Ÿè¸ªçš„ç»å…¸æŒ‡æ ‡</title>
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.8; color: #333; }
    .bilingual { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .zh { border-left: 3px solid #c41e3a; padding-left: 15px; }
    .en { border-left: 3px solid #1a73e8; padding-left: 15px; }
    h1 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
    h2 { color: #2c3e50; margin-top: 30px; }
    h3 { color: #34495e; }
    .formula { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; font-family: 'Courier New', monospace; line-height: 2; }
    pre.code { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 14px; line-height: 1.5; }
    .insight { background: #eaf2f8; padding: 15px; border-radius: 8px; margin: 20px 0; }
    .references { background: #f8f9fa; padding: 15px; border-radius: 8px; }
    .warning { background: #fdecea; padding: 15px; border-radius: 8px; border-left: 4px solid #e74c3c; margin: 15px 0; }
    .keyword { color: #569cd6; }
    .string { color: #ce9178; }
    .comment { color: #6a9955; }
    .number { color: #b5cea8; }
    .func { color: #dcdcaa; }
    table { border-collapse: collapse; width: 100%; margin: 15px 0; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
    th { background: #f8f9fa; }
    .graph { text-align: center; font-family: monospace; background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; white-space: pre; line-height: 1.3; font-size: 13px; }
  </style>
</head>
<body>

<h1>ğŸ“ˆ Day 10 | MACD â€” è¶‹åŠ¿è·Ÿè¸ªçš„ç»å…¸æŒ‡æ ‡</h1>
<p><em>2026-02-27 | Phase 2: Technical Indicators</em></p>

<div class="bilingual">
<div class="zh">
<h2>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ç‰ˆ</h2>

<h3>ä¸€ã€MACD æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>MACDï¼ˆMoving Average Convergence Divergenceï¼Œç§»åŠ¨å¹³å‡æ”¶æ•›æ•£åº¦ï¼‰ç”± Gerald Appel åœ¨ 1970 å¹´ä»£å‘æ˜ï¼Œæ˜¯æŠ€æœ¯åˆ†æä¸­æœ€ç»å…¸çš„<strong>è¶‹åŠ¿è·Ÿè¸ª+åŠ¨é‡</strong>æŒ‡æ ‡ä¹‹ä¸€ã€‚å®ƒæœ¬è´¨ä¸Šè¡¡é‡çš„æ˜¯ä¸¤æ¡ä¸åŒå‘¨æœŸ EMA ä¹‹é—´çš„"è·ç¦»å˜åŒ–"â€”â€”å½“å¿«çº¿è¿œç¦»æ…¢çº¿æ—¶ï¼Œè¶‹åŠ¿åœ¨åŠ é€Ÿï¼›å½“ä¸¤è€…é è¿‘æ—¶ï¼Œè¶‹åŠ¿åœ¨å‡å¼±ã€‚</p>

<h3>äºŒã€ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶</h3>
<p><strong>1. MACD Lineï¼ˆDIF çº¿ï¼‰</strong>ï¼šå¿«é€Ÿ EMA ä¸æ…¢é€Ÿ EMA çš„å·®å€¼</p>
<p><strong>2. Signal Lineï¼ˆDEA/ä¿¡å·çº¿ï¼‰</strong>ï¼šMACD Line çš„ EMA å¹³æ»‘</p>
<p><strong>3. Histogramï¼ˆæŸ±çŠ¶å›¾ï¼‰</strong>ï¼šMACD Line ä¸ Signal Line çš„å·®å€¼</p>

<h3>ä¸‰ã€æ•°å­¦å…¬å¼</h3>
<div class="formula">
EMA(t) = Î± Ã— Price(t) + (1 - Î±) Ã— EMA(t-1)<br>
å…¶ä¸­ Î± = 2 / (N + 1)<br><br>
MACD Line = EMA(12) - EMA(26)<br>
Signal Line = EMA(9, of MACD Line)<br>
Histogram = MACD Line - Signal Line
</div>

<p>é»˜è®¤å‚æ•° (12, 26, 9) æ˜¯ Appel åŸå§‹æ¨èçš„ï¼Œå¯¹åº”çº¦ 2 å‘¨ã€1 ä¸ªæœˆã€1.5 å‘¨çš„äº¤æ˜“æ—¥ã€‚ä½†è¿™äº›å‚æ•°<strong>å¹¶éç¥åœ£ä¸å¯å˜çš„</strong>â€”â€”ä¸åŒå¸‚åœºã€ä¸åŒæ—¶é—´æ¡†æ¶å¯èƒ½éœ€è¦ä¸åŒå‚æ•°ã€‚</p>

<h3>å››ã€å››ç§ç»å…¸äº¤æ˜“ä¿¡å·</h3>

<table>
<tr><th>ä¿¡å·ç±»å‹</th><th>æ¡ä»¶</th><th>å«ä¹‰</th><th>å¯é åº¦</th></tr>
<tr><td>é‡‘å‰ (Bullish Cross)</td><td>MACD Line ä¸Šç©¿ Signal Line</td><td>ä¸Šå‡åŠ¨é‡å¢å¼º</td><td>â­â­â­</td></tr>
<tr><td>æ­»å‰ (Bearish Cross)</td><td>MACD Line ä¸‹ç©¿ Signal Line</td><td>ä¸‹é™åŠ¨é‡å¢å¼º</td><td>â­â­â­</td></tr>
<tr><td>é›¶è½´ç©¿è¶Š (Zero Cross)</td><td>MACD Line ç©¿è¶Šé›¶çº¿</td><td>ä¸­æœŸè¶‹åŠ¿åè½¬</td><td>â­â­â­â­</td></tr>
<tr><td>èƒŒç¦» (Divergence)</td><td>ä»·æ ¼ä¸ MACD æ–¹å‘ç›¸å</td><td>è¶‹åŠ¿å¯èƒ½åè½¬</td><td>â­â­â­â­â­</td></tr>
</table>

<h3>äº”ã€MACD èƒŒç¦» â€” æœ€æœ‰ä»·å€¼çš„ä¿¡å·</h3>
<p><strong>çœ‹æ¶¨èƒŒç¦»</strong>ï¼šä»·æ ¼åˆ›æ–°ä½ï¼Œä½† MACD æ²¡æœ‰åˆ›æ–°ä½ â†’ ä¸‹è·ŒåŠ¨èƒ½è¡°ç«­<br>
<strong>çœ‹è·ŒèƒŒç¦»</strong>ï¼šä»·æ ¼åˆ›æ–°é«˜ï¼Œä½† MACD æ²¡æœ‰åˆ›æ–°é«˜ â†’ ä¸Šæ¶¨åŠ¨èƒ½è¡°ç«­</p>

<div class="insight">
<strong>ğŸ’¡ å…³é”®æ´å¯Ÿ</strong>ï¼šèƒŒç¦»ä¿¡å·é€šå¸¸éœ€è¦å…¶ä»–ç¡®è®¤ï¼ˆå¦‚æˆäº¤é‡ã€æ”¯æ’‘/é˜»åŠ›ä½ï¼‰ï¼Œå•ç‹¬ä½¿ç”¨èƒŒç¦»è¿›è¡Œäº¤æ˜“æ˜¯å±é™©çš„ã€‚å¸‚åœºå¯ä»¥åœ¨æç«¯è¶‹åŠ¿ä¸­é•¿æœŸä¿æŒ"èƒŒç¦»"çŠ¶æ€â€”â€”æƒ³æƒ³ 2020-2021 çš„ç§‘æŠ€è‚¡ã€‚
</div>

<h3>å…­ã€MACD çš„å±€é™æ€§</h3>
<div class="warning">
<strong>âš ï¸ é‡è¦è­¦å‘Š</strong><br>
1. <strong>æ»åæ€§</strong>ï¼šMACD åŸºäº EMAï¼Œæœ¬è´¨æ˜¯æ»åæŒ‡æ ‡ã€‚ç­‰ä½ çœ‹åˆ°é‡‘å‰æ—¶ï¼Œè¶‹åŠ¿å¯èƒ½å·²ç»èµ°äº†ä¸€å¤§æ®µã€‚<br>
2. <strong>éœ‡è¡å¸‚å‡ä¿¡å·</strong>ï¼šåœ¨æ¨ªç›˜æ•´ç†ä¸­ï¼ŒMACD ä¼šé¢‘ç¹äº§ç”Ÿé‡‘å‰/æ­»å‰ï¼Œé€ æˆå¤§é‡å‡ä¿¡å·ï¼ˆwhipsawï¼‰ã€‚<br>
3. <strong>å‚æ•°æ•æ„Ÿæ€§</strong>ï¼š(12,26,9) ä¸æ˜¯ä¸‡èƒ½çš„ã€‚ç”¨å†å²æ•°æ®ä¼˜åŒ–å‚æ•°ï¼Ÿå°å¿ƒè¿‡æ‹Ÿåˆã€‚<br>
4. <strong>æ— ç»å¯¹æ°´å¹³</strong>ï¼šä¸ RSI ä¸åŒï¼ŒMACD æ²¡æœ‰å›ºå®šçš„è¶…ä¹°/è¶…å–æ°´å¹³ã€‚
</div>

<h3>ä¸ƒã€é‡åŒ–å®æˆ˜ï¼šMACD + è¶‹åŠ¿è¿‡æ»¤</h3>
<p>çº¯ MACD é‡‘å‰/æ­»å‰ç­–ç•¥åœ¨å›æµ‹ä¸­è¡¨ç°ä¸€èˆ¬ã€‚ä¸“ä¸šåšæ³•æ˜¯åŠ å…¥<strong>è¶‹åŠ¿è¿‡æ»¤å™¨</strong>ï¼š</p>
<ul>
<li>åªåœ¨ä»·æ ¼é«˜äº 200 æ—¥ MA æ—¶æ‰§è¡Œ MACD åšå¤šä¿¡å·</li>
<li>åªåœ¨ä»·æ ¼ä½äº 200 æ—¥ MA æ—¶æ‰§è¡Œ MACD åšç©ºä¿¡å·</li>
<li>è¿™æ ·è¿‡æ»¤æ‰æ¨ªç›˜éœ‡è¡ä¸­çš„å‡ä¿¡å·</li>
</ul>

<h3>å…«ã€ä¸ Day 8 å’Œ Day 9 çš„è¿æ¥</h3>
<p>MACD æœ¬èº«å°±æ˜¯ EMAï¼ˆDay 8ï¼‰çš„è¡ç”Ÿå“ã€‚è€Œ MACD æ˜¯<strong>è¶‹åŠ¿/åŠ¨é‡</strong>æŒ‡æ ‡ï¼ŒRSIï¼ˆDay 9ï¼‰æ˜¯<strong>å‡å€¼å›å½’</strong>æŒ‡æ ‡â€”â€”ä¸¤è€…äº’è¡¥ã€‚ä¸€ä¸ªå®æˆ˜ç»„åˆï¼šç”¨ MACD ç¡®è®¤è¶‹åŠ¿æ–¹å‘ï¼Œç”¨ RSI å¯»æ‰¾å…¥åœºæ—¶æœºã€‚</p>
</div>

<div class="en">
<h2>ğŸ‡ºğŸ‡¸ English Version</h2>

<h3>1. What is MACD?</h3>
<p>MACD (Moving Average Convergence Divergence), invented by Gerald Appel in the 1970s, is one of the most widely used <strong>trend-following + momentum</strong> indicators. At its core, it measures the "rate of change in distance" between two EMAs of different periodsâ€”when the fast EMA pulls away from the slow EMA, trend momentum is increasing; when they converge, momentum is fading.</p>

<h3>2. Three Core Components</h3>
<p><strong>1. MACD Line</strong>: Difference between fast EMA and slow EMA</p>
<p><strong>2. Signal Line</strong>: EMA smoothing of the MACD Line</p>
<p><strong>3. Histogram</strong>: Difference between MACD Line and Signal Line</p>

<h3>3. Mathematical Formulas</h3>
<div class="formula">
EMA(t) = Î± Ã— Price(t) + (1 - Î±) Ã— EMA(t-1)<br>
where Î± = 2 / (N + 1)<br><br>
MACD Line = EMA(12) - EMA(26)<br>
Signal Line = EMA(9, of MACD Line)<br>
Histogram = MACD Line - Signal Line
</div>

<p>The default (12, 26, 9) parameters were Appel's original recommendation, roughly mapping to 2 weeks, 1 month, and 1.5 weeks of trading days. These are <strong>not sacred</strong>â€”different markets and timeframes may require different settings.</p>

<h3>4. Four Classic Trading Signals</h3>
<table>
<tr><th>Signal</th><th>Condition</th><th>Meaning</th><th>Reliability</th></tr>
<tr><td>Bullish Cross</td><td>MACD Line crosses above Signal</td><td>Rising momentum</td><td>â­â­â­</td></tr>
<tr><td>Bearish Cross</td><td>MACD Line crosses below Signal</td><td>Falling momentum</td><td>â­â­â­</td></tr>
<tr><td>Zero Line Cross</td><td>MACD Line crosses zero</td><td>Medium-term reversal</td><td>â­â­â­â­</td></tr>
<tr><td>Divergence</td><td>Price vs MACD disagree</td><td>Potential reversal</td><td>â­â­â­â­â­</td></tr>
</table>

<h3>5. MACD Divergence â€” The Most Valuable Signal</h3>
<p><strong>Bullish divergence</strong>: Price makes lower low, MACD makes higher low â†’ bearish momentum exhausting<br>
<strong>Bearish divergence</strong>: Price makes higher high, MACD makes lower high â†’ bullish momentum exhausting</p>

<div class="insight">
<strong>ğŸ’¡ Key Insight</strong>: Divergence signals typically require additional confirmation (volume, support/resistance). Trading divergence alone is riskyâ€”markets can stay "divergent" for extended periods during strong trends (think tech stocks 2020-2021).
</div>

<h3>6. Limitations</h3>
<div class="warning">
<strong>âš ï¸ Critical Warnings</strong><br>
1. <strong>Lagging</strong>: Built on EMAs, MACD is inherently lagging. By the time you see a crossover, a significant move may have already occurred.<br>
2. <strong>Whipsaws in range markets</strong>: During consolidation, MACD generates frequent false crossover signals.<br>
3. <strong>Parameter sensitivity</strong>: (12,26,9) isn't universal. Optimizing on historical data? Beware of overfitting.<br>
4. <strong>No absolute levels</strong>: Unlike RSI, MACD has no fixed overbought/oversold thresholds.
</div>

<h3>7. Quant Practice: MACD + Trend Filter</h3>
<p>Pure MACD crossover strategies backtest poorly. The professional approach adds a <strong>trend filter</strong>:</p>
<ul>
<li>Only take MACD long signals when price is above 200-day MA</li>
<li>Only take MACD short signals when price is below 200-day MA</li>
<li>This filters out false signals during consolidation</li>
</ul>

<h3>8. Connection to Day 8 & Day 9</h3>
<p>MACD is a derivative of EMA (Day 8). While MACD is a <strong>trend/momentum</strong> indicator, RSI (Day 9) is a <strong>mean-reversion</strong> indicatorâ€”they complement each other. A practical combo: use MACD to confirm trend direction, RSI to find entry timing.</p>
</div>
</div>

<h2>ğŸ’» Python Implementation / ä»£ç å®ç°</h2>

<pre class="code"><span class="comment"># MACD Strategy with 200-day MA Trend Filter</span>
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">import</span> yfinance <span class="keyword">as</span> yf

<span class="keyword">def</span> <span class="func">compute_macd</span>(prices, fast=<span class="number">12</span>, slow=<span class="number">26</span>, signal=<span class="number">9</span>):
    <span class="string">"""Compute MACD, Signal line, and Histogram."""</span>
    ema_fast = prices.ewm(span=fast, adjust=<span class="keyword">False</span>).mean()
    ema_slow = prices.ewm(span=slow, adjust=<span class="keyword">False</span>).mean()
    macd_line = ema_fast - ema_slow
    signal_line = macd_line.ewm(span=signal, adjust=<span class="keyword">False</span>).mean()
    histogram = macd_line - signal_line
    <span class="keyword">return</span> macd_line, signal_line, histogram

<span class="comment"># Download SPY data</span>
df = yf.download(<span class="string">"SPY"</span>, start=<span class="string">"2020-01-01"</span>, end=<span class="string">"2026-02-27"</span>)
close = df[<span class="string">"Close"</span>].squeeze()

<span class="comment"># Compute indicators</span>
macd_line, signal_line, histogram = compute_macd(close)
ma_200 = close.rolling(<span class="number">200</span>).mean()

<span class="comment"># Generate signals with trend filter</span>
signals = pd.DataFrame(index=df.index)
signals[<span class="string">"macd_cross"</span>] = np.where(macd_line > signal_line, <span class="number">1</span>, -<span class="number">1</span>)
signals[<span class="string">"trend"</span>] = np.where(close > ma_200, <span class="number">1</span>, -<span class="number">1</span>)

<span class="comment"># Only trade with the trend</span>
signals[<span class="string">"position"</span>] = np.where(
    (signals[<span class="string">"macd_cross"</span>] == <span class="number">1</span>) & (signals[<span class="string">"trend"</span>] == <span class="number">1</span>), <span class="number">1</span>,   <span class="comment"># Long</span>
    np.where(
        (signals[<span class="string">"macd_cross"</span>] == -<span class="number">1</span>) & (signals[<span class="string">"trend"</span>] == -<span class="number">1</span>), -<span class="number">1</span>, <span class="comment"># Short</span>
        <span class="number">0</span>  <span class="comment"># Flat â€” no signal or conflicting signals</span>
    )
)

<span class="comment"># Backtest</span>
returns = close.pct_change()
strategy_returns = signals[<span class="string">"position"</span>].shift(<span class="number">1</span>) * returns  <span class="comment"># shift to avoid look-ahead</span>
cumulative = (<span class="number">1</span> + strategy_returns).cumprod()

<span class="comment"># Performance metrics</span>
ann_return = strategy_returns.mean() * <span class="number">252</span>
ann_vol = strategy_returns.std() * np.sqrt(<span class="number">252</span>)
sharpe = ann_return / ann_vol <span class="keyword">if</span> ann_vol > <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>
max_dd = (cumulative / cumulative.cummax() - <span class="number">1</span>).min()

print(<span class="string">f"Annual Return:  {ann_return:.2%}"</span>)
print(<span class="string">f"Annual Vol:     {ann_vol:.2%}"</span>)
print(<span class="string">f"Sharpe Ratio:   {sharpe:.2f}"</span>)
print(<span class="string">f"Max Drawdown:   {max_dd:.2%}"</span>)

<span class="comment"># --- Detect Divergence (Advanced) ---</span>
<span class="keyword">def</span> <span class="func">detect_divergence</span>(price, macd, lookback=<span class="number">20</span>):
    <span class="string">"""Simple divergence detection using rolling windows."""</span>
    bullish_div = (
        (price == price.rolling(lookback).min()) &
        (macd > macd.rolling(lookback).min())
    )
    bearish_div = (
        (price == price.rolling(lookback).max()) &
        (macd < macd.rolling(lookback).max())
    )
    <span class="keyword">return</span> bullish_div, bearish_div

bull_div, bear_div = detect_divergence(close, macd_line)
print(<span class="string">f"\nBullish divergences found: {bull_div.sum()}"</span>)
print(<span class="string">f"Bearish divergences found: {bear_div.sum()}"</span>)
</pre>

<h2>ğŸ“ Histogram çš„äºŒé˜¶ä¿¡æ¯ / Second-Order Information</h2>

<div class="formula">
Histogram = MACD Line - Signal Line<br><br>
Histogram å¢å¤§ â†’ è¶‹åŠ¿åŠ¨é‡åœ¨åŠ é€Ÿ<br>
Histogram å‡å° â†’ è¶‹åŠ¿åŠ¨é‡åœ¨å‡é€Ÿï¼ˆå³ä½¿è¿˜åœ¨åŒä¸€æ–¹å‘ï¼ï¼‰<br><br>
è¿™å°±åƒç‰©ç†ä¸­çš„ "åŠ é€Ÿåº¦ vs é€Ÿåº¦"ï¼š<br>
MACD Line â‰ˆ è¶‹åŠ¿çš„ "é€Ÿåº¦"<br>
Histogram â‰ˆ è¶‹åŠ¿çš„ "åŠ é€Ÿåº¦"<br>
Histogram è½¬è´Ÿä½†ä»·æ ¼è¿˜åœ¨æ¶¨ â†’ æ±½è½¦è¿˜åœ¨å‰è¿›ä½†æ­£åœ¨è¸©åˆ¹è½¦
</div>

<div class="insight">
<strong>ğŸ’¡ Pro Tip</strong>: Many quant traders find the Histogram more useful than the crossover signal itself. A shrinking histogram is an <em>early warning</em> of trend weakening, giving you time to adjust position size or tighten stopsâ€”well before the crossover happens.
</div>

<h2>ğŸ“– References / å‚è€ƒæ–‡çŒ®</h2>
<div class="references">
<ul>
<li>Appel, Gerald. <em>Technical Analysis: Power Tools for Active Investors</em> (2005) â€” MACD inventor's own guide</li>
<li>Murphy, John J. <em>Technical Analysis of the Financial Markets</em> â€” Chapter on oscillators and MACD</li>
<li>Chan, Ernest. <em>Quantitative Trading</em> (2009) â€” Framework for backtesting indicators</li>
<li>LÃ³pez de Prado, Marcos. <em>Advances in Financial Machine Learning</em> (2018) â€” Chapter 5: Fractionally differentiated features (alternative to lagging indicators)</li>
<li>Kirkpatrick & Dahlquist. <em>Technical Analysis: The Complete Resource</em> â€” Comprehensive MACD treatment</li>
<li>AQR Research: "The Case for Momentum" â€” Theoretical foundation for trend-following</li>
</ul>
</div>

</body>
</html>