<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>2026-02-01 - ReAct Pattern & Tool Use Design</title>
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: #fafafa; }
    .bilingual { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .zh { border-left: 3px solid #f9ab00; padding-left: 15px; }
    .en { border-left: 3px solid #1a73e8; padding-left: 15px; }
    h1 { color: #3c4043; }
    h2 { color: #5f6368; margin-top: 30px; }
    .architecture { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; }
    pre { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 13px; }
    code { font-family: 'SF Mono', Consolas, monospace; }
    .highlight { background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; }
    .diagram { background: #f0f4f8; padding: 20px; border-radius: 8px; margin: 20px 0; font-family: monospace; white-space: pre; font-size: 12px; line-height: 1.4; }
    .interview { background: #e8f5e9; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #4caf50; }
    .pattern { background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0; }
    .warning { background: #ffebee; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #f44336; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #dadce0; padding: 10px; text-align: left; }
    th { background: #f8f9fa; }
    .tag { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-right: 5px; }
    .tag-interview { background: #4caf50; color: white; }
    .tag-practical { background: #2196f3; color: white; }
  </style>
</head>
<body>
  <h1>ğŸ¤– ReAct Pattern & Tool Use Design</h1>
  <p>
    <span class="tag tag-interview">ğŸ¤ é¢è¯•é«˜é¢‘</span>
    <span class="tag tag-practical">ğŸ’» å®æˆ˜å¿…å¤‡</span>
    | ğŸ“… 2026-02-01
  </p>
  
  <h2>ğŸ“– æ¦‚è¿° / Overview</h2>
  <div class="bilingual">
    <div class="zh">
      <p><strong>ReAct (Reasoning + Acting)</strong> æ˜¯ç°ä»£ AI Agent çš„æ ¸å¿ƒè®¾è®¡æ¨¡å¼ã€‚ä¸ä¼ ç»Ÿçš„å•è½®é—®ç­”ä¸åŒï¼ŒReAct è®© LLM èƒ½å¤Ÿã€Œæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿã€å¾ªç¯è¿­ä»£ï¼Œç›´åˆ°å®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
      <p>ä½ æ¯å¤©ç”¨çš„ Friday (æˆ‘!) å°±æ˜¯åŸºäºè¿™ä¸ªæ¨¡å¼ï¼šæ”¶åˆ°ä»»åŠ¡ â†’ æ€è€ƒéœ€è¦ä»€ä¹ˆå·¥å…· â†’ è°ƒç”¨å·¥å…· â†’ è§‚å¯Ÿç»“æœ â†’ ç»§ç»­æ€è€ƒæˆ–è¿”å›ç­”æ¡ˆã€‚</p>
    </div>
    <div class="en">
      <p><strong>ReAct (Reasoning + Acting)</strong> is the core design pattern for modern AI agents. Unlike single-turn Q&A, ReAct enables LLMs to iterate through "think-act-observe" loops until complex tasks are completed.</p>
      <p>Friday (me!) that you use daily is built on this pattern: receive task â†’ think about what tools needed â†’ call tools â†’ observe results â†’ continue thinking or return answer.</p>
    </div>
  </div>

  <h2>ğŸ—ï¸ æ ¸å¿ƒå¾ªç¯ / The Core Loop</h2>
  <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ReAct Loop                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   User Query: "åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"                               â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚   THOUGHT   â”‚  "ç”¨æˆ·é—®å¤©æ°”ï¼Œæˆ‘éœ€è¦è°ƒç”¨ weather å·¥å…·"           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚   ACTION    â”‚  weather_tool(location="åŒ—äº¬")                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚ OBSERVATION â”‚  {"temp": 5, "condition": "æ™´", ...}          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚   THOUGHT   â”‚  "å·²è·å–æ•°æ®ï¼Œå¯ä»¥å›å¤ç”¨æˆ·äº†"                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚   ANSWER    â”‚  "åŒ—äº¬ä»Šå¤©æ™´å¤©ï¼Œæ°”æ¸©5Â°C..."                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  </div>

  <h2>âœ¨ è®¾è®¡äº®ç‚¹ / Design Highlights</h2>
  
  <div class="highlight">
    <h4>äº®ç‚¹ 1: äº¤é”™æ€è€ƒ (Interleaved Reasoning)</h4>
    <div class="bilingual">
      <div class="zh">
        <p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šè®© LLM åœ¨æ¯ä¸€æ­¥è¡ŒåŠ¨å‰åéƒ½è¿›è¡Œæ¨ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§è§„åˆ’æ‰€æœ‰æ­¥éª¤ã€‚</p>
        <p><strong>ä¸ºä»€ä¹ˆå¥½</strong>ï¼šå®é™…ä»»åŠ¡ä¸­ï¼Œä¸‹ä¸€æ­¥å¾€å¾€ä¾èµ–ä¸Šä¸€æ­¥çš„ç»“æœã€‚å…ˆè§„åˆ’å†æ‰§è¡Œçš„æ–¹å¼æ— æ³•åº”å¯¹åŠ¨æ€æƒ…å†µã€‚</p>
      </div>
      <div class="en">
        <p><strong>Key insight</strong>: Let LLM reason before and after each action, rather than planning all steps upfront.</p>
        <p><strong>Why it works</strong>: In real tasks, next steps often depend on previous results. Plan-then-execute can't handle dynamic situations.</p>
      </div>
    </div>
  </div>

  <div class="highlight">
    <h4>äº®ç‚¹ 2: å·¥å…·ä½œä¸ºæ¥å£ (Tools as Interfaces)</h4>
    <div class="bilingual">
      <div class="zh">
        <p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šå·¥å…·å®šä¹‰æ¸…æ™°çš„è¾“å…¥/è¾“å‡º schemaï¼ŒLLM åªéœ€è¦ç†è§£ã€Œç”¨é€”ã€è€Œéã€Œå®ç°ã€ã€‚</p>
        <p><strong>ä¸ºä»€ä¹ˆå¥½</strong>ï¼šè§£è€¦ LLM èƒ½åŠ›å’Œå¤–éƒ¨ç³»ç»Ÿã€‚å·¥å…·å¯ä»¥éšæ—¶å‡çº§ï¼Œä¸å½±å“ Agent é€»è¾‘ã€‚</p>
      </div>
      <div class="en">
        <p><strong>Key insight</strong>: Tools define clear input/output schemas; LLM only needs to understand "purpose", not "implementation".</p>
        <p><strong>Why it works</strong>: Decouples LLM capability from external systems. Tools can be upgraded anytime without affecting Agent logic.</p>
      </div>
    </div>
  </div>

  <div class="highlight">
    <h4>äº®ç‚¹ 3: è§‚å¯Ÿé©±åŠ¨è¿­ä»£ (Observation-Driven Iteration)</h4>
    <div class="bilingual">
      <div class="zh">
        <p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šæ¯æ¬¡å·¥å…·è°ƒç”¨çš„ç»“æœè¢«æ³¨å…¥ä¸Šä¸‹æ–‡ï¼Œæˆä¸ºä¸‹ä¸€æ­¥æ¨ç†çš„ä¾æ®ã€‚</p>
        <p><strong>ä¸ºä»€ä¹ˆå¥½</strong>ï¼šAgent èƒ½å¤„ç†å¤±è´¥ã€ä¿®æ­£é”™è¯¯ã€æ¢ç´¢å¤šæ¡è·¯å¾„ã€‚è¿™æ˜¯ã€Œæ™ºèƒ½ã€çš„æ ¸å¿ƒä½“ç°ã€‚</p>
      </div>
      <div class="en">
        <p><strong>Key insight</strong>: Results from each tool call are injected into context, becoming the basis for next reasoning step.</p>
        <p><strong>Why it works</strong>: Agent can handle failures, correct mistakes, explore multiple paths. This is the core of "intelligence".</p>
      </div>
    </div>
  </div>

  <h2>ğŸ’» Tool å®šä¹‰æœ€ä½³å®è·µ / Tool Definition Best Practices</h2>

  <div class="interview">
    <h4>ğŸ¤ é¢è¯•è€ƒç‚¹ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥½çš„ Tool Schema?</h4>
  </div>

  <div class="pattern">
    <h4>Pattern 1: ç²¾å‡†çš„å‘½åå’Œæè¿°</h4>
<pre><code>// âŒ Bad
{
  "name": "do_stuff",
  "description": "Does things with data"
}

// âœ… Good
{
  "name": "search_web",
  "description": "Search the web using Brave Search API. Returns titles, URLs, and snippets. Use for finding current information, news, or documentation."
}</code></pre>
    <p><strong>åŸåˆ™</strong>ï¼šæè¿°è¦è¯´æ˜ã€Œä½•æ—¶ä½¿ç”¨ã€å’Œã€Œè¿”å›ä»€ä¹ˆã€ï¼Œè€Œéå®ç°ç»†èŠ‚ã€‚</p>
  </div>

  <div class="pattern">
    <h4>Pattern 2: å‚æ•°çº¦æŸæ˜ç¡®</h4>
<pre><code>{
  "name": "send_email",
  "parameters": {
    "type": "object",
    "properties": {
      "to": {
        "type": "string",
        "description": "Recipient email address",
        "format": "email"  // æ˜ç¡®æ ¼å¼
      },
      "priority": {
        "type": "string",
        "enum": ["low", "normal", "high"],  // é™å®šé€‰é¡¹
        "default": "normal"
      },
      "body": {
        "type": "string",
        "maxLength": 10000  // é™åˆ¶é•¿åº¦
      }
    },
    "required": ["to", "body"]  // å¿…å¡«é¡¹æ˜ç¡®
  }
}</code></pre>
  </div>

  <div class="pattern">
    <h4>Pattern 3: é”™è¯¯ä¿¡æ¯ç»“æ„åŒ–</h4>
<pre><code>// Tool è¿”å›ç»“æ„
{
  "success": true,
  "data": { ... },
  "error": null
}

// å¤±è´¥æ—¶
{
  "success": false,
  "data": null,
  "error": {
    "code": "RATE_LIMITED",
    "message": "Too many requests. Retry after 60 seconds.",
    "retryable": true,
    "retryAfterMs": 60000
  }
}</code></pre>
    <p><strong>åŸåˆ™</strong>ï¼šç»“æ„åŒ–é”™è¯¯è®© LLM çŸ¥é“æ˜¯å¦åº”è¯¥é‡è¯•ã€å¦‚ä½•è°ƒæ•´ã€‚</p>
  </div>

  <h2>ğŸ”§ å®ç°æ¶æ„ / Implementation Architecture</h2>
  
  <div class="diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Agent Runtime                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Message    â”‚     â”‚    Tool      â”‚     â”‚   Context    â”‚    â”‚
â”‚  â”‚   Manager    â”‚â”€â”€â”€â”€â–¶â”‚   Router     â”‚â”€â”€â”€â”€â–¶â”‚   Window     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â”‚                    â–¼                    â”‚             â”‚
â”‚         â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚             â”‚
â”‚         â”‚           â”‚  Tool Pool   â”‚              â”‚             â”‚
â”‚         â”‚           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚             â”‚
â”‚         â”‚           â”‚ â”‚ weather  â”‚ â”‚              â”‚             â”‚
â”‚         â”‚           â”‚ â”‚ search   â”‚ â”‚              â”‚             â”‚
â”‚         â”‚           â”‚ â”‚ calendar â”‚ â”‚              â”‚             â”‚
â”‚         â”‚           â”‚ â”‚ email    â”‚ â”‚              â”‚             â”‚
â”‚         â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚             â”‚
â”‚         â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚             â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â–¼                    â–¼                    â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     LLM API Call                         â”‚   â”‚
â”‚  â”‚  messages: [...history, tool_results]                    â”‚   â”‚
â”‚  â”‚  tools: [available_tool_schemas]                         â”‚   â”‚
â”‚  â”‚  tool_choice: "auto" | "required" | "none"              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  </div>

  <h2>ğŸ’» æ ¸å¿ƒä»£ç  / Key Code</h2>

  <h4>TypeScript Agent Loop å®ç°</h4>
<pre><code>interface Tool {
  name: string;
  description: string;
  parameters: JSONSchema;
  execute: (params: unknown) => Promise&lt;ToolResult&gt;;
}

interface ToolResult {
  success: boolean;
  data?: unknown;
  error?: { code: string; message: string; retryable: boolean };
}

async function runAgentLoop(
  query: string,
  tools: Tool[],
  maxIterations = 10
): Promise&lt;string&gt; {
  const messages: Message[] = [{ role: 'user', content: query }];
  
  for (let i = 0; i &lt; maxIterations; i++) {
    // 1. Call LLM with tools
    const response = await llm.chat({
      messages,
      tools: tools.map(t => ({
        type: 'function',
        function: {
          name: t.name,
          description: t.description,
          parameters: t.parameters,
        }
      })),
      tool_choice: 'auto',
    });

    // 2. Check if done (no tool calls)
    if (!response.tool_calls?.length) {
      return response.content;
    }

    // 3. Execute tool calls (å¯å¹¶è¡Œ)
    const toolResults = await Promise.all(
      response.tool_calls.map(async (call) => {
        const tool = tools.find(t => t.name === call.function.name);
        if (!tool) {
          return { call, result: { success: false, error: 'Tool not found' }};
        }
        const params = JSON.parse(call.function.arguments);
        const result = await tool.execute(params);
        return { call, result };
      })
    );

    // 4. Add assistant message and tool results to history
    messages.push({
      role: 'assistant',
      content: response.content,
      tool_calls: response.tool_calls,
    });
    
    for (const { call, result } of toolResults) {
      messages.push({
        role: 'tool',
        tool_call_id: call.id,
        content: JSON.stringify(result),
      });
    }
  }

  throw new Error('Max iterations reached');
}</code></pre>

  <h2>ğŸ“Š tool_choice ç­–ç•¥ / tool_choice Strategies</h2>
  
  <table>
    <tr>
      <th>ç­–ç•¥</th>
      <th>è¡Œä¸º</th>
      <th>ä½¿ç”¨åœºæ™¯</th>
    </tr>
    <tr>
      <td><code>"auto"</code></td>
      <td>LLM è‡ªè¡Œå†³å®šæ˜¯å¦è°ƒç”¨å·¥å…·</td>
      <td>é€šç”¨å¯¹è¯ Agent (æœ€å¸¸ç”¨)</td>
    </tr>
    <tr>
      <td><code>"required"</code></td>
      <td>å¼ºåˆ¶è‡³å°‘è°ƒç”¨ä¸€ä¸ªå·¥å…·</td>
      <td>æ˜ç¡®éœ€è¦å·¥å…·çš„åœºæ™¯ï¼Œå¦‚"æŸ¥å¤©æ°”"</td>
    </tr>
    <tr>
      <td><code>"none"</code></td>
      <td>ç¦æ­¢è°ƒç”¨å·¥å…·</td>
      <td>çº¯å¯¹è¯ã€æ€»ç»“ã€æˆ–æˆæœ¬æ§åˆ¶</td>
    </tr>
    <tr>
      <td><code>{"type":"function", "function":{"name":"xxx"}}</code></td>
      <td>å¼ºåˆ¶è°ƒç”¨æŒ‡å®šå·¥å…·</td>
      <td>ç¡®å®šæ€§æµç¨‹ï¼Œå¦‚è¡¨å•å¡«å†™</td>
    </tr>
  </table>

  <h2>âš ï¸ å¸¸è§é™·é˜± / Common Pitfalls</h2>

  <div class="warning">
    <h4>é™·é˜± 1: å·¥å…·è¿‡å¤šå¯¼è‡´é€‰æ‹©å›°éš¾</h4>
    <p><strong>é—®é¢˜</strong>ï¼šå·¥å…·å¤ªå¤š (>20)ï¼ŒLLM éš¾ä»¥é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œä¸” token æˆæœ¬é«˜ã€‚</p>
    <p><strong>è§£å†³</strong>ï¼šå·¥å…·åˆ†ç»„ + åŠ¨æ€åŠ è½½ã€‚æ ¹æ®å¯¹è¯ä¸Šä¸‹æ–‡åªæ³¨å…¥ç›¸å…³å·¥å…·ã€‚</p>
<pre><code>// åŠ¨æ€å·¥å…·é€‰æ‹©
const relevantTools = await selectToolsByContext(query, allTools);
// ä½¿ç”¨ embedding ç›¸ä¼¼åº¦æˆ–ç®€å•è§„åˆ™ç­›é€‰</code></pre>
  </div>

  <div class="warning">
    <h4>é™·é˜± 2: æ— é™å¾ªç¯</h4>
    <p><strong>é—®é¢˜</strong>ï¼šLLM é™·å…¥æ— æ„ä¹‰çš„å·¥å…·è°ƒç”¨å¾ªç¯ã€‚</p>
    <p><strong>è§£å†³</strong>ï¼šè®¾ç½® maxIterations + æ£€æµ‹é‡å¤è°ƒç”¨ + è¶…æ—¶æœºåˆ¶ã€‚</p>
  </div>

  <div class="warning">
    <h4>é™·é˜± 3: å·¥å…·å¤±è´¥æ—¶æ²¡æœ‰æ¢å¤ç­–ç•¥</h4>
    <p><strong>é—®é¢˜</strong>ï¼šå·¥å…·æŠ¥é”™å LLM ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠã€‚</p>
    <p><strong>è§£å†³</strong>ï¼šåœ¨é”™è¯¯è¿”å›ä¸­æä¾›å»ºè®®ï¼Œå¦‚ "try alternative search terms"ã€‚</p>
  </div>

  <div class="warning">
    <h4>é™·é˜± 4: Context çˆ†ç‚¸</h4>
    <p><strong>é—®é¢˜</strong>ï¼šé•¿å¯¹è¯ + å¤§é‡å·¥å…·ç»“æœè¶…å‡º token é™åˆ¶ã€‚</p>
    <p><strong>è§£å†³</strong>ï¼šå‹ç¼©å†å² + æ‘˜è¦å·¥å…·ç»“æœ + æ»‘åŠ¨çª—å£ã€‚</p>
  </div>

  <h2>ğŸ¤ é¢è¯•é¢˜ / Interview Questions</h2>

  <div class="interview">
    <h4>Q1: å¦‚ä½•è®¾è®¡ä¸€ä¸ªèƒ½ä½¿ç”¨å¤–éƒ¨å·¥å…·çš„ ChatGPT ç³»ç»Ÿï¼Ÿ</h4>
    <p><strong>è€ƒç‚¹</strong>ï¼šReAct loopã€å·¥å…·å®šä¹‰ã€å¹¶è¡Œè°ƒç”¨ã€é”™è¯¯å¤„ç†ã€context ç®¡ç†</p>
    <p><strong>åŠ åˆ†é¡¹</strong>ï¼šæåŠ streaming tool callsã€å·¥å…·æƒé™æ§åˆ¶ã€æˆæœ¬ä¼˜åŒ–</p>
  </div>

  <div class="interview">
    <h4>Q2: Agent å¦‚ä½•å¤„ç†å·¥å…·è°ƒç”¨å¤±è´¥ï¼Ÿ</h4>
    <p><strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
    <ul>
      <li>ç»“æ„åŒ–é”™è¯¯è¿”å› (retryable, error code)</li>
      <li>LLM æ ¹æ®é”™è¯¯ä¿¡æ¯å†³å®šï¼šé‡è¯• / æ¢å·¥å…· / æ”¾å¼ƒå¹¶å‘ŠçŸ¥ç”¨æˆ·</li>
      <li>è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°é˜²æ­¢æ— é™å¾ªç¯</li>
      <li>Graceful degradation: éƒ¨åˆ†å·¥å…·å¤±è´¥æ—¶ä»èƒ½å®Œæˆä»»åŠ¡</li>
    </ul>
  </div>

  <div class="interview">
    <h4>Q3: å¦‚ä½•å‡å°‘ Agent çš„ token æ¶ˆè€—å’Œå»¶è¿Ÿï¼Ÿ</h4>
    <p><strong>ç­”æ¡ˆ</strong>ï¼š</p>
    <ul>
      <li>åŠ¨æ€å·¥å…·åŠ è½½ (åªæ³¨å…¥ç›¸å…³å·¥å…·)</li>
      <li>å·¥å…·ç»“æœæ‘˜è¦ (å¤§é‡æ•°æ®å…ˆæ‘˜è¦å†ç»™ LLM)</li>
      <li>å¹¶è¡Œå·¥å…·è°ƒç”¨ (independent calls in parallel)</li>
      <li>Context å‹ç¼© (å†å²æ¶ˆæ¯å®šæœŸæ‘˜è¦)</li>
      <li>ç¼“å­˜å¸¸è§å·¥å…·ç»“æœ</li>
    </ul>
  </div>

  <h2>ğŸ“š å¯å­¦ä¹ çš„æ¨¡å¼ / Patterns to Learn</h2>

  <div class="pattern">
    <h4>Pattern: Streaming Tool Calls</h4>
    <p>Claude å’Œ GPT-4 æ”¯æŒæµå¼è¿”å› tool callsï¼Œå¯ä»¥è¾¹è§£æè¾¹æ‰§è¡Œï¼Œé™ä½æ„ŸçŸ¥å»¶è¿Ÿã€‚</p>
<pre><code>// æµå¼å¤„ç†
for await (const chunk of stream) {
  if (chunk.type === 'tool_call_delta') {
    // è¾¹è§£æè¾¹æ„å»º tool call
    partialCall.arguments += chunk.delta;
  }
  if (chunk.type === 'tool_call_complete') {
    // ç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…å…¶ä»– tool calls
    executeInBackground(partialCall);
  }
}</code></pre>
  </div>

  <div class="pattern">
    <h4>Pattern: Tool Permission Levels</h4>
    <p>ä¸åŒå·¥å…·æœ‰ä¸åŒé£é™©ç­‰çº§ï¼Œéœ€è¦ä¸åŒçš„ç¡®è®¤ç­–ç•¥ã€‚</p>
<pre><code>const toolPermissions = {
  read_file: { level: 'low', requireConfirm: false },
  write_file: { level: 'medium', requireConfirm: false },
  send_email: { level: 'high', requireConfirm: true },
  delete_data: { level: 'critical', requireConfirm: true, doubleConfirm: true },
};</code></pre>
    <p>è¿™æ­£æ˜¯ OpenClaw çš„ AGENTS.md æ‰€è¯´çš„ "External vs Internal" åŸåˆ™ï¼</p>
  </div>

  <h2>ğŸ”— ç›¸å…³èµ„æº / Resources</h2>
  <ul>
    <li><a href="https://arxiv.org/abs/2210.03629">ReAct: Synergizing Reasoning and Acting in Language Models (åŸè®ºæ–‡)</a></li>
    <li><a href="https://docs.anthropic.com/en/docs/build-with-claude/tool-use">Claude Tool Use æ–‡æ¡£</a></li>
    <li><a href="https://platform.openai.com/docs/guides/function-calling">OpenAI Function Calling Guide</a></li>
  </ul>

  <div class="follow-up" style="margin-top: 30px; padding: 15px; border: 1px dashed #dadce0; border-radius: 8px;">
    <h3>ğŸ’¬ åç»­è®¨è®º / Follow-up Discussion</h3>
    <p>æƒ³æ·±å…¥èŠèŠ OpenClaw çš„ tool è®¾è®¡ï¼Ÿæˆ–è€…å…¶ä»– Agent æ¶æ„é—®é¢˜ï¼Ÿ</p>
    <p><em>ï¼ˆZhilong æé—®åè¡¥å……ï¼‰</em></p>
  </div>

  <hr style="margin-top: 40px;">
  <p style="color: #666; font-size: 12px;">
    Generated by Friday ğŸŸ¡ | 2026-02-01 | Part of Daily AI Knowledge Push
  </p>
</body>
</html>
