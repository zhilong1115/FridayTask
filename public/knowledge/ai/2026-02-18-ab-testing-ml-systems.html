<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>2026-02-18 - A/B Testing for ML: ä»ç»Ÿè®¡æ£€éªŒåˆ°è‡ªé€‚åº”å®éªŒ</title>
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.8; color: #333; }
    .bilingual { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .zh { border-left: 3px solid #f9ab00; padding-left: 15px; }
    .en { border-left: 3px solid #1a73e8; padding-left: 15px; }
    h1 { color: #3c4043; }
    h2 { color: #1a73e8; border-bottom: 2px solid #e8eaed; padding-bottom: 8px; }
    .architecture { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; }
    pre { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 13px; }
    .highlight { background: #fff3cd; padding: 10px; border-radius: 8px; margin: 10px 0; }
    .diagram { text-align: center; margin: 20px 0; }
    .follow-up { margin-top: 30px; padding: 15px; border: 1px dashed #dadce0; border-radius: 8px; }
    table { border-collapse: collapse; width: 100%; margin: 15px 0; }
    th, td { border: 1px solid #dadce0; padding: 10px; text-align: left; }
    th { background: #f1f3f4; }
    .interview { background: #e8f5e9; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #4caf50; }
    .warning { background: #fce4ec; padding: 10px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #e53935; }
    code { background: #f1f3f4; padding: 2px 6px; border-radius: 4px; font-size: 0.9em; }
    .series-nav { background: #e3f2fd; padding: 12px; border-radius: 8px; margin: 15px 0; }
  </style>
</head>
<body>
  <div class="series-nav">
    ğŸ“š <strong>Phase 2.2 ML ç³»ç»Ÿè®¾è®¡è¦ç‚¹</strong> â€” Day 4 of 6<br>
    Day 1: <a href="2026-02-15-ml-system-design-patterns.html">7 å¤§é€šç”¨ Pattern</a> â†’
    Day 2: <a href="2026-02-16-feature-store-design.html">Feature Store</a> â†’
    Day 3: <a href="2026-02-17-model-serving-architecture.html">Model Serving</a> â†’
    <strong>Day 4: A/B Testing for ML</strong> â†’
    Day 5: å»¶è¿Ÿ vs è´¨é‡æƒè¡¡ â†’
    Day 6: æ€»ç»“
  </div>

  <h1>ğŸ§ª A/B Testing for ML: ä»ç»Ÿè®¡æ£€éªŒåˆ°è‡ªé€‚åº”å®éªŒ</h1>
  <p>ğŸ“… 2026-02-18 | Phase 2.2 ML ç³»ç»Ÿè®¾è®¡è¦ç‚¹ Day 4</p>

  <h2>ğŸ“– ä¸ºä»€ä¹ˆ ML çš„ A/B Testing ä¸ä¸€æ ·ï¼Ÿ</h2>
  <div class="bilingual">
    <div class="zh">
      <p>ä¼ ç»Ÿ A/B Testing æ¯”è¾ƒä¸¤ä¸ªç½‘é¡µæŒ‰é’®é¢œè‰²ï¼ŒæŒ‡æ ‡æ˜¯ç‚¹å‡»ç‡â€”â€”ç®€å•ç›´æ¥ã€‚ä½† ML æ¨¡å‹çš„ A/B Testing å¤æ‚å¾—å¤šï¼š</p>
      <ul>
        <li><strong>å»¶è¿Ÿåé¦ˆ</strong>ï¼šæ¨èç³»ç»Ÿçš„å¥½åå¯èƒ½è¦å‡ å‘¨æ‰èƒ½ä½“ç°ï¼ˆç”¨æˆ·ç•™å­˜ï¼‰</li>
        <li><strong>å¤šæŒ‡æ ‡å†²çª</strong>ï¼šCTR ä¸Šå‡ä½†ç”¨æˆ·æ»¡æ„åº¦ä¸‹é™ï¼ˆæ ‡é¢˜å…šæ•ˆåº”ï¼‰</li>
        <li><strong>ç½‘ç»œæ•ˆåº”</strong>ï¼šç¤¾äº¤æ¨èä¸­ï¼ŒA ç»„ç”¨æˆ·çš„è¡Œä¸ºä¼šå½±å“ B ç»„</li>
        <li><strong>æ¨¡å‹æ¼‚ç§»</strong>ï¼šå®éªŒæœŸé—´æ¨¡å‹æœ¬èº«åœ¨å˜åŒ–</li>
        <li><strong>é«˜æ–¹å·®</strong>ï¼šML è¾“å‡ºæ¯” UI å˜åŒ–æ–¹å·®å¤§å¾—å¤šï¼Œéœ€è¦æ›´å¤šæ ·æœ¬</li>
      </ul>
    </div>
    <div class="en">
      <p>Traditional A/B testing compares button colors with click rate â€” straightforward. ML A/B testing is fundamentally harder:</p>
      <ul>
        <li><strong>Delayed feedback</strong>: Recommendation quality may take weeks to manifest (retention)</li>
        <li><strong>Conflicting metrics</strong>: CTR up but satisfaction down (clickbait effect)</li>
        <li><strong>Network effects</strong>: In social recs, group A users influence group B</li>
        <li><strong>Model drift</strong>: The model itself changes during the experiment</li>
        <li><strong>High variance</strong>: ML outputs have much higher variance than UI changes</li>
      </ul>
    </div>
  </div>

  <h2>ğŸ—ï¸ å››ç§ ML å®éªŒæ–¹æ³•å¯¹æ¯”</h2>

  <div class="architecture">
    <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ML Experimentation Spectrum               â”‚
â”‚                                                          â”‚
â”‚  å®‰å…¨ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º å¿«é€Ÿ    â”‚
â”‚                                                          â”‚
â”‚  Shadow     â†’    A/B Test    â†’  Interleaving  â†’  Bandit  â”‚
â”‚  Testing         (ç»å…¸)          (æœç´¢/æ¨è)     (è‡ªé€‚åº”) â”‚
â”‚                                                          â”‚
â”‚  é›¶é£é™©           ä¸­ç­‰é£é™©        ä½é£é™©          æœ€ä¼˜åŒ–   â”‚
â”‚  æ— åœ¨çº¿æŒ‡æ ‡       é‡‘æ ‡å‡†          çµæ•åº¦é«˜        æ ·æœ¬æœ€å°‘  â”‚
â”‚  æœ€æ…¢             ä¸­ç­‰            å¿«              æœ€å¿«     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
  </div>

  <table>
    <tr>
      <th>æ–¹æ³•</th><th>åŸç†</th><th>é€‚ç”¨åœºæ™¯</th><th>æ ·æœ¬é‡</th><th>é£é™©</th>
    </tr>
    <tr>
      <td><strong>Shadow Testing</strong></td>
      <td>æ–°æ¨¡å‹å¹¶è¡Œè¿è¡Œä½†ä¸å±•ç¤ºç»“æœ</td>
      <td>é«˜é£é™©åœºæ™¯ï¼ˆé‡‘èã€åŒ»ç–—ï¼‰ï¼›ä¸Šçº¿å‰éªŒè¯</td>
      <td>N/Aï¼ˆåªçœ‹ç¦»çº¿æŒ‡æ ‡ï¼‰</td>
      <td>é›¶</td>
    </tr>
    <tr>
      <td><strong>A/B Testing</strong></td>
      <td>éšæœºåˆ†æµï¼Œç»Ÿè®¡æ£€éªŒæ¯”è¾ƒ</td>
      <td>é€šç”¨åœºæ™¯ï¼›éœ€è¦å› æœæ¨æ–­</td>
      <td>å¤§ï¼ˆä¸‡çº§+ï¼‰</td>
      <td>ä¸­</td>
    </tr>
    <tr>
      <td><strong>Interleaving</strong></td>
      <td>æ··åˆä¸¤ä¸ªæ¨¡å‹çš„ç»“æœå±•ç¤ºç»™åŒä¸€ç”¨æˆ·</td>
      <td>æœç´¢ã€æ¨èæ’åº</td>
      <td>å°ï¼ˆA/B çš„ 1/100ï¼‰</td>
      <td>ä½</td>
    </tr>
    <tr>
      <td><strong>Multi-Armed Bandit</strong></td>
      <td>åŠ¨æ€è°ƒæ•´æµé‡åˆ†é…ï¼Œè¾¹å­¦è¾¹ä¼˜åŒ–</td>
      <td>éœ€è¦å¿«é€Ÿæ”¶æ•›ï¼›å¤šå˜ä½“</td>
      <td>æœ€å°</td>
      <td>è‡ªé€‚åº”</td>
    </tr>
  </table>

  <h2>ğŸ¯ æ–¹æ³•ä¸€ï¼šç»å…¸ A/B Testing æ·±å…¥</h2>
  <div class="bilingual">
    <div class="zh">
      <h3>ç»Ÿè®¡åŸºç¡€ï¼ˆé¢è¯•å¿…è€ƒï¼‰</h3>
      <p><strong>å‡è®¾æ£€éªŒæ¡†æ¶ï¼š</strong></p>
      <ul>
        <li>Hâ‚€ï¼ˆé›¶å‡è®¾ï¼‰ï¼šæ–°æ—§æ¨¡å‹æ— å·®å¼‚</li>
        <li>Hâ‚ï¼ˆå¤‡æ‹©å‡è®¾ï¼‰ï¼šæ–°æ¨¡å‹æ›´å¥½</li>
        <li><strong>Î±ï¼ˆType I Errorï¼‰</strong>= è¯¯åˆ¤æœ‰æ•ˆï¼Œé€šå¸¸ 5%</li>
        <li><strong>Î²ï¼ˆType II Errorï¼‰</strong>= æ¼åˆ¤æœ‰æ•ˆï¼Œé€šå¸¸ 20%</li>
        <li><strong>Power = 1 - Î² = 80%</strong>ï¼šæ£€æµ‹åˆ°çœŸå®å·®å¼‚çš„æ¦‚ç‡</li>
      </ul>
      <p><strong>æœ€å°æ ·æœ¬é‡å…¬å¼ï¼š</strong></p>
      <p><code>n = (Z_Î±/2 + Z_Î²)Â² Ã— 2ÏƒÂ² / Î´Â²</code></p>
      <p>å…¶ä¸­ Î´ = æœ€å°å¯æ£€æµ‹æ•ˆåº” (MDE)ã€‚ML å®éªŒçš„ MDE é€šå¸¸å¾ˆå°ï¼ˆ0.1%-0.5%ï¼‰ï¼Œæ‰€ä»¥éœ€è¦å¤§é‡æ ·æœ¬ã€‚</p>
    </div>
    <div class="en">
      <h3>Statistical Foundation (Interview Essential)</h3>
      <p><strong>Hypothesis testing framework:</strong></p>
      <ul>
        <li>Hâ‚€ (null): No difference between models</li>
        <li>Hâ‚ (alternative): New model is better</li>
        <li><strong>Î± (Type I)</strong> = false positive, typically 5%</li>
        <li><strong>Î² (Type II)</strong> = false negative, typically 20%</li>
        <li><strong>Power = 1 - Î² = 80%</strong>: probability of detecting real effect</li>
      </ul>
      <p><strong>Minimum sample size:</strong></p>
      <p><code>n = (Z_Î±/2 + Z_Î²)Â² Ã— 2ÏƒÂ² / Î´Â²</code></p>
      <p>Where Î´ = Minimum Detectable Effect. ML experiments often target tiny MDE (0.1%-0.5%), requiring massive samples.</p>
    </div>
  </div>

  <div class="highlight">
    <h4>âš ï¸ ML A/B Testing çš„ä¸‰å¤§é™·é˜±</h4>
    <ol>
      <li><strong>Peeking Problem</strong>ï¼šæå‰çœ‹ç»“æœä¼šè†¨èƒ€ Type I Errorã€‚è§£å†³ï¼šSequential Testingï¼ˆå¦‚ mSPRTï¼‰æˆ– Always-Valid P-values</li>
      <li><strong>Multiple Comparisons</strong>ï¼šåŒæ—¶çœ‹ 20 ä¸ªæŒ‡æ ‡ï¼Œå¿…ç„¶æœ‰ 1 ä¸ª p < 0.05ã€‚è§£å†³ï¼šBonferroni æ ¡æ­£ æˆ– æŒ‡å®š 1 ä¸ª Primary Metric</li>
      <li><strong>Simpson's Paradox</strong>ï¼šæ€»ä½“æŒ‡æ ‡æå‡ä½†æŸäº›å­ç¾¤ä½“ä¸‹é™ã€‚è§£å†³ï¼šåˆ†å±‚åˆ†æ (Stratification)</li>
    </ol>
  </div>

  <h3>ML A/B Test æ¶æ„</h3>
  <div class="architecture">
    <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Traffic â”‚â”€â”€â”€â”€â†’â”‚  Experiment â”‚â”€â”€â”€â”€â†’â”‚  Model A     â”‚â”€â”€â†’ Response A
â”‚  Router  â”‚     â”‚  Assignment â”‚     â”‚  (Control)   â”‚
â”‚          â”‚     â”‚  (Sticky    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚          â”‚     â”‚   Hash)     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚     â”‚             â”‚â”€â”€â”€â”€â†’â”‚  Model B     â”‚â”€â”€â†’ Response B
â”‚          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  (Treatment) â”‚
â”‚          â”‚            â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Event Logger   â”‚â”€â”€â”€â”€â†’â”‚  Analysis    â”‚
              â”‚  (user_id,      â”‚     â”‚  Pipeline    â”‚
              â”‚   variant,      â”‚     â”‚  (p-value,   â”‚
              â”‚   metrics...)   â”‚     â”‚   CI, power) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…³é”®è®¾è®¡å†³ç­–ï¼š
1. Sticky Assignment: hash(user_id + experiment_id) ä¿è¯ç”¨æˆ·å§‹ç»ˆçœ‹åˆ°åŒä¸€ç‰ˆæœ¬
2. Ramp-up: 1% â†’ 5% â†’ 25% â†’ 50% é€æ­¥æ”¾é‡
3. Guardrail Metrics: å»¶è¿Ÿã€é”™è¯¯ç‡ã€æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ä¸èƒ½æ¶åŒ–
4. Segment Analysis: æ–°ç”¨æˆ· vs è€ç”¨æˆ·ã€åœ°åŒºã€è®¾å¤‡åˆ†å±‚
    </pre>
  </div>

<pre><code>// Experiment Assignment â€” é¢è¯•å¸¸è€ƒçš„ sticky hashing
function assignVariant(userId: string, experimentId: string, trafficPct: number): string | null {
  const hash = murmurhash3(userId + experimentId);
  const bucket = hash % 10000; // ä¸‡åˆ†ä½ç²¾åº¦

  // æ˜¯å¦åœ¨å®éªŒæµé‡å†…
  if (bucket >= trafficPct * 100) return null; // ä¸åœ¨å®éªŒä¸­

  // åˆ†é…åˆ° control æˆ– treatment
  return bucket % 2 === 0 ? 'control' : 'treatment';
}

// Guardrail check â€” è‡ªåŠ¨ç†”æ–­
async function checkGuardrails(experimentId: string): Promise<boolean> {
  const metrics = await getExperimentMetrics(experimentId);
  
  // P99 å»¶è¿Ÿä¸èƒ½æ¶åŒ–è¶…è¿‡ 10%
  if (metrics.treatment.p99Latency > metrics.control.p99Latency * 1.1) {
    await killExperiment(experimentId, 'latency_degradation');
    return false;
  }
  
  // é”™è¯¯ç‡ä¸èƒ½è¶…è¿‡ baseline + 0.5%
  if (metrics.treatment.errorRate > metrics.control.errorRate + 0.005) {
    await killExperiment(experimentId, 'error_rate_spike');
    return false;
  }
  
  return true;
}
</code></pre>

  <h2>ğŸ”€ æ–¹æ³•äºŒï¼šInterleavingï¼ˆæœç´¢/æ¨èç¥å™¨ï¼‰</h2>
  <div class="bilingual">
    <div class="zh">
      <h3>ä¸ºä»€ä¹ˆ Interleaving æ¯” A/B Testing çµæ• 100 å€ï¼Ÿ</h3>
      <p>A/B Testing æ¯”è¾ƒ<strong>ä¸¤ç»„ä¸åŒç”¨æˆ·</strong>çš„è¡Œä¸ºâ€”â€”ç”¨æˆ·é—´çš„å·®å¼‚ï¼ˆå¹´é¾„ã€åå¥½ã€æ´»è·ƒåº¦ï¼‰ä¼šå¼•å…¥å·¨å¤§å™ªå£°ã€‚</p>
      <p>Interleaving è®©<strong>åŒä¸€ç”¨æˆ·</strong>åŒæ—¶çœ‹åˆ°ä¸¤ä¸ªæ¨¡å‹çš„ç»“æœï¼ˆæ··åˆæ’åˆ—ï¼‰ï¼Œç”¨æˆ·çš„ç‚¹å‡»è‡ªç„¶åœ°"æŠ•ç¥¨"ç»™æ›´å¥½çš„æ¨¡å‹ã€‚è¿™æ¶ˆé™¤äº†ç”¨æˆ·é—´å·®å¼‚ï¼Œä¿¡å™ªæ¯”æš´å¢ã€‚</p>
      <p><strong>Netflix å®éªŒ</strong>è¯æ˜ï¼šInterleaving åªéœ€ A/B Testing 1% çš„æ ·æœ¬å°±èƒ½è¾¾åˆ°åŒç­‰ç»Ÿè®¡æ•ˆåŠ›ã€‚</p>
      
      <h3>Team Draft Interleaving ç®—æ³•</h3>
      <ol>
        <li>æ¨¡å‹ A å’Œ B å„è‡ªäº§å‡ºæ’åºåˆ—è¡¨</li>
        <li>åƒçƒé˜Ÿé€‰ç§€ä¸€æ ·äº¤æ›¿é€‰æ‹©ï¼šA å…ˆé€‰ç¬¬ 1 ä¸ªã€B é€‰ç¬¬ 1 ä¸ªã€A é€‰ç¬¬ 2 ä¸ª...</li>
        <li>è®°å½•æ¯ä¸ªç»“æœæ¥è‡ªå“ªä¸ªæ¨¡å‹</li>
        <li>ç”¨æˆ·ç‚¹å‡»äº†å±äº A çš„ç»“æœ â†’ A å¾— 1 åˆ†</li>
        <li>æ¯”è¾ƒæ€»åˆ†åˆ¤æ–­å“ªä¸ªæ¨¡å‹æ›´å¥½</li>
      </ol>
    </div>
    <div class="en">
      <h3>Why is Interleaving 100x more sensitive than A/B?</h3>
      <p>A/B testing compares <strong>different user groups</strong> â€” inter-user variance (age, preference, activity) adds massive noise.</p>
      <p>Interleaving shows <strong>the same user</strong> results from both models (mixed), and clicks naturally "vote" for the better model. This eliminates between-user variance, dramatically increasing signal-to-noise.</p>
      <p><strong>Netflix found</strong>: Interleaving needs only 1% of A/B testing's sample size for equivalent statistical power.</p>
      
      <h3>Team Draft Interleaving</h3>
      <ol>
        <li>Models A and B each produce ranked lists</li>
        <li>Alternate picks like sports draft: A picks 1st, B picks 1st, A picks 2nd...</li>
        <li>Track which model each result belongs to</li>
        <li>User clicks on A's result â†’ A gets 1 point</li>
        <li>Compare scores to determine winner</li>
      </ol>
    </div>
  </div>

<pre><code>// Team Draft Interleaving
function teamDraftInterleave(listA: string[], listB: string[], k: number): InterleavedResult {
  const result: string[] = [];
  const teamA = new Set&lt;string&gt;();
  const teamB = new Set&lt;string&gt;();
  let idxA = 0, idxB = 0;
  
  while (result.length < k) {
    // äº¤æ›¿é€‰æ‹©ï¼Œè°çš„é˜Ÿä¼å°è°å…ˆé€‰
    const aPicksFirst = teamA.size <= teamB.size;
    
    if (aPicksFirst) {
      // A é€‰è¿˜æ²¡è¢«é€‰è¿‡çš„æœ€é«˜æ’å
      while (idxA < listA.length && result.includes(listA[idxA])) idxA++;
      if (idxA < listA.length) {
        result.push(listA[idxA]);
        teamA.add(listA[idxA]);
      }
      // B é€‰
      while (idxB < listB.length && result.includes(listB[idxB])) idxB++;
      if (idxB < listB.length && result.length < k) {
        result.push(listB[idxB]);
        teamB.add(listB[idxB]);
      }
    } else {
      // B å…ˆé€‰ï¼ˆå¯¹ç§°é€»è¾‘ï¼‰
      while (idxB < listB.length && result.includes(listB[idxB])) idxB++;
      if (idxB < listB.length) {
        result.push(listB[idxB]);
        teamB.add(listB[idxB]);
      }
      while (idxA < listA.length && result.includes(listA[idxA])) idxA++;
      if (idxA < listA.length && result.length < k) {
        result.push(listA[idxA]);
        teamA.add(listA[idxA]);
      }
    }
  }
  
  return { items: result, teamA, teamB };
}

// è¯„åˆ†ï¼šç”¨æˆ·ç‚¹å‡»å±äºå“ªä¸ª team
function scoreInterleaving(clicks: string[], teamA: Set&lt;string&gt;, teamB: Set&lt;string&gt;) {
  let scoreA = 0, scoreB = 0;
  for (const click of clicks) {
    if (teamA.has(click)) scoreA++;
    if (teamB.has(click)) scoreB++;
  }
  // ç”¨ sign test æˆ– binomial test åˆ¤æ–­æ˜¾è‘—æ€§
  return { scoreA, scoreB, winner: scoreA > scoreB ? 'A' : scoreA < scoreB ? 'B' : 'tie' };
}
</code></pre>

  <div class="warning">
    <strong>Interleaving çš„å±€é™ï¼š</strong>åªèƒ½ç”¨äºæ’åºç±»ä»»åŠ¡ï¼ˆæœç´¢ã€æ¨èã€Feedï¼‰ã€‚ä¸èƒ½ç”¨äº ChatGPT è¿™æ ·çš„ç”Ÿæˆå¼ä»»åŠ¡ï¼ˆä½ ä¸èƒ½æ··åˆä¸¤ä¸ªå›ç­”ç»™ç”¨æˆ·ï¼‰ã€‚
  </div>

  <h2>ğŸ° æ–¹æ³•ä¸‰ï¼šMulti-Armed Banditï¼ˆè‡ªé€‚åº”å®éªŒï¼‰</h2>
  <div class="bilingual">
    <div class="zh">
      <h3>æ ¸å¿ƒæ€æƒ³ï¼šExplore vs Exploit</h3>
      <p>A/B Testing åœ¨å®éªŒæœŸé—´ 50/50 åˆ†æµâ€”â€”å³ä½¿ä¸€ä¸ªå˜ä½“æ˜æ˜¾æ›´å·®ï¼Œä¹Ÿåœ¨"æµªè´¹"ä¸€åŠæµé‡ã€‚</p>
      <p>Bandit ç®—æ³•åŠ¨æ€è°ƒæ•´ï¼šè¡¨ç°å¥½çš„å˜ä½“è·å¾—æ›´å¤šæµé‡ï¼Œå·®çš„å˜ä½“é€æ¸å‡å°‘ã€‚è¿™åœ¨æ•°å­¦ä¸Šå«åš <strong>Exploration-Exploitation Tradeoff</strong>ã€‚</p>
      
      <h3>ä¸‰ç§ç»å…¸ Bandit ç®—æ³•</h3>
      <table>
        <tr><th>ç®—æ³•</th><th>ç­–ç•¥</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr>
        <tr><td>Îµ-Greedy</td><td>Îµ æ¦‚ç‡éšæœºæ¢ç´¢ï¼Œ1-Îµ æ¦‚ç‡é€‰æœ€ä¼˜</td><td>ç®€å•</td><td>ä¸å¤Ÿæ™ºèƒ½</td></tr>
        <tr><td>UCB (Upper Confidence Bound)</td><td>é€‰"å‡å€¼+ä¸ç¡®å®šæ€§"æœ€å¤§çš„</td><td>ç†è®ºæœ€ä¼˜</td><td>å‡è®¾å›ºå®šåˆ†å¸ƒ</td></tr>
        <tr><td><strong>Thompson Sampling</strong></td><td>æŒ‰åéªŒæ¦‚ç‡é‡‡æ ·å†³å®š</td><td>è‡ªç„¶è´å¶æ–¯ï¼›æœ€å¸¸ç”¨</td><td>è®¡ç®—ç¨å¤æ‚</td></tr>
      </table>
    </div>
    <div class="en">
      <h3>Core Idea: Explore vs Exploit</h3>
      <p>A/B Testing splits 50/50 during the experiment â€” even when one variant is clearly worse, half the traffic is "wasted".</p>
      <p>Bandit algorithms dynamically adjust: better performers get more traffic, worse ones fade. This is the <strong>Exploration-Exploitation Tradeoff</strong>.</p>
      
      <h3>Three Classic Bandit Algorithms</h3>
      <table>
        <tr><th>Algorithm</th><th>Strategy</th><th>Pro</th><th>Con</th></tr>
        <tr><td>Îµ-Greedy</td><td>Îµ prob random, 1-Îµ pick best</td><td>Simple</td><td>Not adaptive enough</td></tr>
        <tr><td>UCB</td><td>Pick highest "mean + uncertainty"</td><td>Theoretically optimal</td><td>Assumes stationary</td></tr>
        <tr><td><strong>Thompson Sampling</strong></td><td>Sample from posterior to decide</td><td>Natural Bayesian; most used</td><td>Slightly complex</td></tr>
      </table>
    </div>
  </div>

<pre><code>// Thompson Sampling for ML Model Selection
import { randomBeta } from './stats';

interface ModelArm {
  modelId: string;
  successes: number;  // æ­£å‘åé¦ˆï¼ˆç‚¹å‡»ã€è´­ä¹°...ï¼‰
  failures: number;   // è´Ÿå‘åé¦ˆ
}

class ThompsonSamplingRouter {
  private arms: ModelArm[];
  
  constructor(modelIds: string[]) {
    // Beta(1,1) = uniform prior
    this.arms = modelIds.map(id => ({ modelId: id, successes: 1, failures: 1 }));
  }
  
  selectModel(): string {
    // ä»æ¯ä¸ªæ¨¡å‹çš„ Beta åéªŒåˆ†å¸ƒä¸­é‡‡æ ·
    let bestScore = -1;
    let bestArm = this.arms[0];
    
    for (const arm of this.arms) {
      // Beta(successes, failures) â†’ é‡‡æ ·ä¸€ä¸ª [0,1] çš„å€¼
      const sample = randomBeta(arm.successes, arm.failures);
      if (sample > bestScore) {
        bestScore = sample;
        bestArm = arm;
      }
    }
    
    return bestArm.modelId;
  }
  
  recordOutcome(modelId: string, success: boolean) {
    const arm = this.arms.find(a => a.modelId === modelId)!;
    if (success) arm.successes++;
    else arm.failures++;
    // åéªŒè‡ªåŠ¨æ›´æ–°ï¼è´å¶æ–¯çš„ä¼˜é›…
  }
  
  getTrafficDistribution(): Record&lt;string, number&gt; {
    // æ¨¡æ‹Ÿ 10000 æ¬¡é‡‡æ ·çœ‹å½“å‰æµé‡åˆ†é…
    const counts: Record&lt;string, number&gt; = {};
    for (let i = 0; i < 10000; i++) {
      const selected = this.selectModel();
      counts[selected] = (counts[selected] || 0) + 1;
    }
    return Object.fromEntries(
      Object.entries(counts).map(([k, v]) => [k, v / 10000])
    );
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const router = new ThompsonSamplingRouter(['model-v1', 'model-v2', 'model-v3']);

// ç»è¿‡ 1000 æ¬¡è¯·æ±‚å...
// model-v1: Beta(150, 850) â†’ ~15% æˆåŠŸç‡ â†’ å‡ ä¹ä¸å†è¢«é€‰
// model-v2: Beta(280, 720) â†’ ~28% æˆåŠŸç‡ â†’ è·å¾—æœ€å¤šæµé‡
// model-v3: Beta(220, 780) â†’ ~22% æˆåŠŸç‡ â†’ ä¸­ç­‰æµé‡
</code></pre>

  <div class="highlight">
    <h4>ğŸ’¡ Bandit vs A/B Testï¼šä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</h4>
    <ul>
      <li><strong>A/B Test</strong>ï¼šéœ€è¦ä¸¥æ ¼å› æœæ¨æ–­ã€éœ€è¦å‘è®ºæ–‡ã€éœ€è¦ç†è§£"ä¸ºä»€ä¹ˆ"æ›´å¥½</li>
      <li><strong>Bandit</strong>ï¼šåªå…³å¿ƒ"å“ªä¸ªæ›´å¥½"ã€å˜ä½“å¤šï¼ˆ>2ï¼‰ã€æœºä¼šæˆæœ¬é«˜ï¼ˆæ¯ä¸ªå·®è¯·æ±‚éƒ½æœ‰çœŸå®æŸå¤±ï¼‰</li>
      <li><strong>å®é™…ä¸­</strong>ï¼šå…ˆ A/B Test éªŒè¯å¤§æ–¹å‘ï¼Œå†ç”¨ Bandit åšç»†ç²’åº¦ä¼˜åŒ–ï¼ˆå¦‚é€‰æ ‡é¢˜ã€é€‰æ¨èç­–ç•¥ï¼‰</li>
    </ul>
  </div>

  <h2>ğŸ¢ å¤§å‚å®éªŒå¹³å°æ¶æ„</h2>
  <div class="bilingual">
    <div class="zh">
      <h3>Netflix / Uber / LinkedIn çš„å…±åŒè®¾è®¡</h3>
      <p>å¤§å‚çš„å®éªŒå¹³å°éƒ½éµå¾ªç±»ä¼¼çš„åˆ†å±‚æ¶æ„ï¼š</p>
    </div>
    <div class="en">
      <h3>Common Design at Netflix / Uber / LinkedIn</h3>
      <p>Big tech experimentation platforms share a layered architecture:</p>
    </div>
  </div>

  <div class="architecture">
    <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Experimentation Platform                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Layer 1: Experiment Configuration                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ UI Portal â”‚ â”‚ API/SDK   â”‚ â”‚ Config Store   â”‚     â”‚
â”‚  â”‚ (å®šä¹‰å®éªŒ) â”‚ â”‚ (åµŒå…¥æœåŠ¡)â”‚ â”‚ (å®éªŒå‚æ•°ä¸‹å‘) â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                      â”‚
â”‚  Layer 2: Traffic Management                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Layered Experiment System               â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Layer A â”‚ â”‚ Layer B â”‚ â”‚ Layer C â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ (UIå®éªŒ)â”‚ â”‚ (æ¨¡å‹)  â”‚ â”‚ (å®šä»·)  â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚  â† åŒä¸€ç”¨æˆ·å¯åŒæ—¶å‚ä¸å¤šå±‚å®éªŒ â†’          â”‚       â”‚
â”‚  â”‚  â† å±‚å†…äº’æ–¥ï¼Œå±‚é—´æ­£äº¤ â†’                  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â”‚  Layer 3: Data & Analysis                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Event    â”‚ â”‚ Metric   â”‚ â”‚ Auto Analysis â”‚       â”‚
â”‚  â”‚ Pipeline â”‚â†’â”‚ Store    â”‚â†’â”‚ (p-value, CI, â”‚       â”‚
â”‚  â”‚ (Kafka)  â”‚ â”‚ (é¢„è®¡ç®—) â”‚ â”‚  power, SRM)  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â”‚  Layer 4: Guardrails & Governance                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Auto-stop on guardrail violations         â”‚       â”‚
â”‚  â”‚ SRM (Sample Ratio Mismatch) detection     â”‚       â”‚
â”‚  â”‚ Experiment review & approval workflow      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </pre>
  </div>

  <div class="highlight">
    <h4>ğŸ”‘ é¢è¯•å…³é”®æ¦‚å¿µï¼šLayered Experiment System</h4>
    <p><strong>é—®é¢˜</strong>ï¼šå¦‚æœåŒæ—¶è·‘ 100 ä¸ªå®éªŒæ€ä¹ˆåŠï¼Ÿç”¨æˆ·ä¼šè¢«åˆ†é…åˆ°å¤šä¸ªå®éªŒï¼Œç»“æœäº’ç›¸å¹²æ‰°ã€‚</p>
    <p><strong>è§£å†³</strong>ï¼šåˆ†å±‚å®éªŒ (Overlapping Layers)ã€‚æ¯ä¸€å±‚æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æµé‡ç©ºé—´ï¼š</p>
    <ul>
      <li>å±‚å†…äº’æ–¥ï¼šåŒä¸€å±‚çš„å®éªŒä¸ä¼šåˆ†é…ç»™åŒä¸€ç”¨æˆ·</li>
      <li>å±‚é—´æ­£äº¤ï¼šä¸åŒå±‚çš„å®éªŒç‹¬ç«‹éšæœºï¼Œäº’ä¸å½±å“</li>
      <li>Google 2010 å¹´çš„è®ºæ–‡ "Overlapping Experiment Infrastructure" æ˜¯è¿™ä¸ªé¢†åŸŸçš„ç»å…¸</li>
    </ul>
    <p><strong>SRM (Sample Ratio Mismatch)</strong>ï¼šå¦‚æœ 50/50 åˆ†æµç»“æœå˜æˆ 51/49ï¼Œè¯´æ˜å®éªŒæœ‰ bugã€‚è¿™æ˜¯å®éªŒè´¨é‡çš„ç¬¬ä¸€é“æ£€æŸ¥ã€‚</p>
  </div>

  <h2>ğŸ”„ ML å®éªŒçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</h2>
  <div class="architecture">
    <pre>
Offline Eval  â†’  Shadow Test  â†’  A/B Test (Ramp)  â†’  Full Rollout
                                                      
1. ç¦»çº¿è¯„ä¼°        2. å½±å­æ¨¡å¼      3. åˆ†æµå®éªŒ          4. å…¨é‡
   - å†å²æ•°æ®å›æµ‹     - å¹¶è¡Œæ¨ç†       - 1%â†’5%â†’50%        - æ›¿æ¢æ—§æ¨¡å‹
   - Offline AUC     - æ¯”è¾ƒè¾“å‡º       - ç›‘æ§ guardrails   - æŒç»­ç›‘æ§
   - ä¸éœ€è¦çº¿ä¸Šæµé‡   - é›¶ç”¨æˆ·å½±å“     - ç»Ÿè®¡æ˜¾è‘—åå†³ç­–     - é•¿æœŸæŒ‡æ ‡

âš¡ å¿«é€Ÿå¤±è´¥ï¼šä»»ä½•é˜¶æ®µä¸é€šè¿‡å°±åœæ­¢ï¼Œé¿å…æŸå¤±
    </pre>
  </div>

  <h2>ğŸ“Š å®¹é‡ä¼°ç®— (Sizing Example)</h2>
  <div class="architecture">
    <p><strong>åœºæ™¯</strong>ï¼šæ¨èç³»ç»Ÿ A/B Testï¼Œæ—¥æ´» 10Mï¼Œbaseline CTR = 5%ï¼ŒMDE = 0.5%ï¼ˆç›¸å¯¹æå‡ 10%ï¼‰</p>
    <pre>
æ‰€éœ€æ ·æœ¬é‡ï¼ˆæ¯ç»„ï¼‰ï¼š
n = (1.96 + 0.84)Â² Ã— 2 Ã— 0.05 Ã— 0.95 / (0.005)Â²
n â‰ˆ 30,000 per group

æ€»éœ€è¦ï¼š60,000 ç”¨æˆ·
DAU = 10M â†’ 0.6% çš„æµé‡å°±å¤Ÿ
å®éªŒæ—¶é•¿ï¼š1 å¤©ï¼ˆä½†å»ºè®®è‡³å°‘è·‘ 1 å‘¨è¦†ç›–æ˜ŸæœŸæ•ˆåº”ï¼‰

Interleaving æ–¹å¼ï¼š
åªéœ€ ~600 ç”¨æˆ·ï¼ˆA/B çš„ 1/100ï¼‰
å‡ å°æ—¶å°±èƒ½è¾¾åˆ°æ˜¾è‘—æ€§

Bandit (Thompson Sampling)ï¼š
regret bound â‰ˆ O(âˆš(KT ln T))
K=3 å˜ä½“, T=100K æ¬¡å±•ç¤º â†’ ç´¯è®¡ regret ~500 æ¬¡æ¬¡ä¼˜å±•ç¤º
ç›¸æ¯” A/B Test çš„ ~50,000 æ¬¡æ¬¡ä¼˜å±•ç¤ºï¼Œå‡å°‘ 99%
    </pre>
  </div>

  <h2>ğŸ“š ä¸å‰å‡ å¤©å†…å®¹çš„è”ç³»</h2>
  <div class="highlight">
    <table>
      <tr><th>å‰å‡ å¤©ä¸»é¢˜</th><th>ä¸ A/B Testing çš„å…³ç³»</th></tr>
      <tr><td>Day 1: 7 å¤§ Pattern</td><td>A/B Testing æ˜¯ <strong>Model Routing Pattern</strong> çš„åœ¨çº¿éªŒè¯æ‰‹æ®µ</td></tr>
      <tr><td>Day 2: Feature Store</td><td>å®éªŒéœ€è¦ Feature Store ä¿è¯ A/B ä¸¤ç»„ç”¨ç‰¹å¾ä¸€è‡´ï¼ˆé™¤äº†è¢«æµ‹å˜é‡ï¼‰</td></tr>
      <tr><td>Day 3: Model Serving</td><td>Canary/Shadow/Blue-Green éƒ¨ç½²ç­–ç•¥æ˜¯ A/B Testing çš„å‰ç½®æ­¥éª¤</td></tr>
    </table>
  </div>

  <h2>ğŸ¤ é¢è¯•é«˜é¢‘é—®é¢˜</h2>

  <div class="interview">
    <h4>Q1: ä½ çš„æ¨èæ¨¡å‹ A/B Test æ˜¾ç¤º CTR æå‡ 2%ï¼Œä½†ç”¨æˆ·ç•™å­˜ä¸‹é™ 1%ã€‚ä½ æ€ä¹ˆå†³ç­–ï¼Ÿ</h4>
    <p><strong>ç­”é¢˜æ¡†æ¶</strong>ï¼š</p>
    <ol>
      <li>é¦–å…ˆç¡®è®¤<strong>ç»Ÿè®¡æ˜¾è‘—æ€§</strong>ï¼šä¸¤ä¸ªæŒ‡æ ‡éƒ½æ˜¾è‘—å—ï¼Ÿç•™å­˜éœ€è¦æ›´é•¿è§‚æµ‹æœŸ</li>
      <li><strong>åˆ†æå› æœé“¾</strong>ï¼šCTR æå‡å¯èƒ½æ˜¯æ ‡é¢˜å…šæ•ˆåº”ï¼ˆçŸ­æœŸå¸å¼•ä½†é•¿æœŸå¤±æœ›ï¼‰</li>
      <li><strong>çœ‹ North Star Metric</strong>ï¼šå¦‚æœå…¬å¸çš„ North Star æ˜¯é•¿æœŸç•™å­˜ï¼ˆå¦‚ Netflixï¼‰ï¼Œé‚£ CTR æå‡ä¸å€¼å¾—ç•™å­˜ä»£ä»·</li>
      <li><strong>åˆ†å±‚åˆ†æ</strong>ï¼šæ˜¯å¦ç‰¹å®šç”¨æˆ·ç¾¤å—å½±å“ï¼Ÿæ–°ç”¨æˆ· vs è€ç”¨æˆ·ï¼Ÿ</li>
      <li><strong>OEC (Overall Evaluation Criterion)</strong>ï¼šå¤§å‚ä¸€èˆ¬å®šä¹‰ä¸€ä¸ªç»¼åˆæŒ‡æ ‡ = f(CTR, ç•™å­˜, revenue...)ï¼Œé¿å…ä¸»è§‚åˆ¤æ–­</li>
    </ol>
  </div>

  <div class="interview">
    <h4>Q2: å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ”¯æŒ 1000 ä¸ªå¹¶å‘å®éªŒçš„å¹³å°ï¼Ÿ</h4>
    <p><strong>ç­”é¢˜è¦ç‚¹</strong>ï¼š</p>
    <ul>
      <li><strong>åˆ†å±‚å®éªŒç³»ç»Ÿ</strong>ï¼šæŠŠå®éªŒæŒ‰é¢†åŸŸåˆ†å±‚ï¼ˆUI/Model/Pricingï¼‰ï¼Œå±‚å†…äº’æ–¥ã€å±‚é—´æ­£äº¤</li>
      <li><strong>å®¢æˆ·ç«¯ SDK ç¼“å­˜</strong>ï¼šå®éªŒé…ç½®æœ¬åœ°ç¼“å­˜ï¼Œé¿å…æ¯æ¬¡è¯·æ±‚éƒ½æŸ¥æœåŠ¡ç«¯</li>
      <li><strong>é¢„è®¡ç®—æŒ‡æ ‡</strong>ï¼šç”¨ Flink/Spark Streaming é¢„èšåˆå®éªŒæŒ‡æ ‡ï¼Œè€Œä¸æ˜¯æŸ¥è¯¢æ—¶å®æ—¶è®¡ç®—</li>
      <li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ SRMã€è‡ªåŠ¨ power analysisã€è‡ªåŠ¨ guardrail ç†”æ–­</li>
    </ul>
  </div>

  <div class="interview">
    <h4>Q3: Interleaving å’Œ A/B Testing ç»“æœä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ</h4>
    <p><strong>ç­”</strong>ï¼šInterleaving æµ‹çš„æ˜¯"æ’åºåå¥½"ï¼ˆå“ªä¸ªæ’å¾—æ›´å¥½ï¼‰ï¼ŒA/B Testing æµ‹çš„æ˜¯"æ•´ä½“ä½“éªŒ"ï¼ˆåŒ…æ‹¬ UIã€å»¶è¿Ÿã€å¤šæ ·æ€§ç­‰ï¼‰ã€‚ä¸ä¸€è‡´è¯´æ˜æ¨¡å‹æ’åºæ›´å¥½ä½†å…¶ä»–å› ç´ æ‹–åè…¿ã€‚ä¼˜å…ˆä¿¡ä»» A/B Testing çš„ç»“æœï¼ˆæ›´å…¨é¢ï¼‰ï¼Œä½†ç”¨ Interleaving çš„ä¿¡å·æŒ‡å¯¼æ¨¡å‹è¿­ä»£æ–¹å‘ã€‚å®é™…ä¸­ï¼Œå…ˆç”¨ Interleaving å¿«é€Ÿç­›é€‰å€™é€‰æ¨¡å‹ï¼Œå†ç”¨ A/B Testing åšæœ€ç»ˆå†³ç­–ã€‚</p>
  </div>

  <div class="interview">
    <h4>Q4: ä»€ä¹ˆæƒ…å†µä¸‹ä¸èƒ½ç”¨ A/B Testingï¼Ÿ</h4>
    <p><strong>ç­”</strong>ï¼š</p>
    <ul>
      <li><strong>ç½‘ç»œæ•ˆåº”</strong>ï¼šç¤¾äº¤äº§å“ä¸­ A ç»„ç”¨æˆ·çš„è¡Œä¸ºå½±å“ B ç»„ï¼ˆè§£å†³ï¼šCluster-based randomizationï¼‰</li>
      <li><strong>ç¨€ç¼ºåœºæ™¯</strong>ï¼šæ‹å–/åŒè¾¹å¸‚åœºï¼Œä¸€ä¸ª item åªèƒ½å–ä¸€æ¬¡ï¼ˆè§£å†³ï¼šSwitchback experimentsï¼‰</li>
      <li><strong>å°æ ·æœ¬</strong>ï¼šB2B äº§å“åªæœ‰ 100 ä¸ªå®¢æˆ·ï¼ˆè§£å†³ï¼šBayesian methods, matched pairsï¼‰</li>
      <li><strong>ä¼¦ç†é™åˆ¶</strong>ï¼šåŒ»ç–—åœºæ™¯ä¸èƒ½éšæœºç»™"å·®"çš„æ²»ç–—ï¼ˆè§£å†³ï¼šå¤šè‡‚ bandit å¿«é€Ÿæ”¶æ•›åˆ°æœ€ä¼˜ï¼‰</li>
    </ul>
  </div>

  <div class="follow-up">
    <h3>ğŸ’­ æ€è€ƒé¢˜ / Thought Question</h3>
    <p><strong>å‡è®¾ä½ åœ¨ OpenClaw ä¸­æœ‰ 3 ä¸ªä¸åŒçš„ LLM æ¨¡å‹å¯ä»¥å›ç­”ç”¨æˆ·é—®é¢˜ã€‚ä½ ä¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªå®éªŒç³»ç»Ÿæ¥æ‰¾åˆ°æœ€ä¼˜æ¨¡å‹ï¼Ÿè€ƒè™‘ï¼š</strong></p>
    <ul>
      <li>ç”¨æˆ·æ»¡æ„åº¦å¦‚ä½•è¡¡é‡ï¼ˆæ²¡æœ‰æ˜ç¡®çš„"ç‚¹å‡»"ä¿¡å·ï¼‰ï¼Ÿ</li>
      <li>ä¸åŒç±»å‹çš„é—®é¢˜æ˜¯å¦éœ€è¦ä¸åŒæ¨¡å‹ï¼Ÿ</li>
      <li>Thompson Sampling åœ¨è¿™é‡Œé€‚ç”¨å—ï¼Ÿæœ‰ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿ</li>
    </ul>
    <p><em>Hint: è¿™å°±æ˜¯ Model Routing + Bandit çš„å®é™…åº”ç”¨åœºæ™¯ã€‚å›å¿† Day 1 çš„ Model Routing Pattern å’Œ Day 3 çš„ Bandit-based deploymentã€‚</em></p>
  </div>

</body>
</html>
